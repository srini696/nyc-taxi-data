{
    "stateMachineArn": "arn:aws:states:us-east-1:473157801752:stateMachine:nyc-taxi-mdm-pipeline",
    "name": "nyc-taxi-mdm-pipeline",
    "status": "ACTIVE",
    "definition": "{\"Comment\":\"NYC Taxi MDM - NO QUALITY GATE (Testing Only)\",\"StartAt\":\"ExtractTripReferences\",\"States\":{\"ExtractTripReferences\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"mdm-extract-references\",\"Payload\":{\"tripData.$\":\"$.tripData\",\"sourceSystem.$\":\"$.sourceSystem\"}},\"ResultPath\":\"$.tripReferences\",\"Next\":\"CheckIfMissingEntities\"},\"CheckIfMissingEntities\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.tripReferences.Payload.totalMissing\",\"NumericGreaterThan\":0,\"Next\":\"ProposeMissingMasters\"}],\"Default\":\"EnrichGoldenTrip\"},\"ProposeMissingMasters\":{\"Type\":\"Map\",\"ItemsPath\":\"$.tripReferences.Payload.missingEntities\",\"MaxConcurrency\":3,\"ResultPath\":\"$.proposedGoldenRecords\",\"Iterator\":{\"StartAt\":\"FuzzyMatchGoldenRecord\",\"States\":{\"FuzzyMatchGoldenRecord\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"mdm-propose-golden-v2\",\"Payload\":{\"entityType.$\":\"$.entityType\",\"sourceId.$\":\"$.sourceId\",\"proposedName.$\":\"$.proposedName\",\"sourceSystem.$\":\"$.sourceSystem\",\"tripData.$\":\"$.tripData\"}},\"ResultPath\":\"$.goldenRecordResult\",\"End\":true}}},\"Next\":\"CheckProposalResults\"},\"CheckProposalResults\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"mdm-check-proposal-status\",\"Payload\":{\"proposedRecords.$\":\"$.proposedGoldenRecords\"}},\"ResultPath\":\"$.proposalStatus\",\"Next\":\"StewardReviewGate\"},\"StewardReviewGate\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.proposalStatus.Payload.needsStewardReview\",\"BooleanEquals\":true,\"Next\":\"PrepareSNSMessage\"}],\"Default\":\"EnrichGoldenTrip\"},\"PrepareSNSMessage\":{\"Type\":\"Pass\",\"Parameters\":{\"pipelineRunId.$\":\"$.pipelineRunId\",\"tripId.$\":\"$.tripData.tripId\",\"pendingRecords.$\":\"$.proposalStatus.Payload.pendingRecords\",\"summary.$\":\"$.proposalStatus.Payload.summary\",\"message\":\"MDM records require steward review and approval\"},\"ResultPath\":\"$.snsMessagePayload\",\"Next\":\"NotifyStewardReview\"},\"NotifyStewardReview\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::sns:publish\",\"Parameters\":{\"TopicArn\":\"arn:aws:sns:us-east-1:473157801752:mdm-steward-alerts\",\"Message.$\":\"States.JsonToString($.snsMessagePayload)\",\"Subject\":\"MDM Review Required - Pending Approval\"},\"ResultPath\":\"$.snsResult\",\"Next\":\"WaitForStewardApproval\"},\"WaitForStewardApproval\":{\"Type\":\"Wait\",\"Seconds\":300,\"Next\":\"CheckApprovalStatus\"},\"CheckApprovalStatus\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"mdm-check-approval\",\"Payload\":{\"pendingRecords.$\":\"$.proposalStatus.Payload.pendingRecords\"}},\"ResultPath\":\"$.approvalStatus\",\"Next\":\"ApprovalDecision\"},\"ApprovalDecision\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.approvalStatus.Payload.allApproved\",\"BooleanEquals\":true,\"Next\":\"EnrichGoldenTrip\"},{\"Variable\":\"$.approvalStatus.Payload.anyRejected\",\"BooleanEquals\":true,\"Next\":\"HandleRejection\"},{\"Variable\":\"$.approvalStatus.Payload.stillPending\",\"BooleanEquals\":true,\"Next\":\"WaitForStewardApproval\"}],\"Default\":\"HandleRejection\"},\"EnrichGoldenTrip\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"mdm-enrich-trip\",\"Payload\":{\"tripData.$\":\"$.tripData\",\"proposedRecords.$\":\"$.proposedGoldenRecords\",\"pipelineRunId.$\":\"$.pipelineRunId\"}},\"ResultPath\":\"$.goldenTrip\",\"Next\":\"AuditSuccess\"},\"AuditSuccess\":{\"Type\":\"Pass\",\"Result\":{\"status\":\"SUCCESS\"},\"End\":true},\"HandleRejection\":{\"Type\":\"Pass\",\"Result\":{\"status\":\"REJECTED\"},\"End\":true}}}",
    "roleArn": "arn:aws:iam::473157801752:role/service-role/StepFunctions-nyc-taxi-mdm-pipeline-role-s3klzlpce",
    "type": "STANDARD",
    "creationDate": "2026-01-10T01:48:14.143000+00:00",
    "loggingConfiguration": {
        "level": "OFF",
        "includeExecutionData": false
    },
    "tracingConfiguration": {
        "enabled": false
    },
    "revisionId": "907b90d0-1525-4901-8982-06ead41acf95",
    "encryptionConfiguration": {
        "type": "AWS_OWNED_KEY"
    }
}
